(window.webpackJsonp=window.webpackJsonp||[]).push([[29,23,24],{835:function(t,e,o){var content=o(840);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("a287604e",content,!0,{sourceMap:!1})},838:function(t,e,o){var content=o(851);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("2581d61e",content,!0,{sourceMap:!1})},839:function(t,e,o){"use strict";o(835)},840:function(t,e,o){var n=o(27)(!1);n.push([t.i,".issue[data-v-fe75e228]{border-top:1px solid fff;cursor:pointer;position:relative}.issue[data-v-fe75e228]:hover{background:#f8f8f8}.issue.showDetails[data-v-fe75e228]{background:#f8f8f8;box-shadow:inset 0 0 7px rgba(0,0,0,.2)}.issue.showDetails .details[data-v-fe75e228]{max-height:40px;cursor:default}.issue.showDetails .details.action[data-v-fe75e228]{max-height:100px}.issue.showDetails .details.deposits[data-v-fe75e228]{max-height:350px}",""]),t.exports=n},846:function(t,e,o){"use strict";o.r(e);o(21),o(103);var n=o(0),r=o(14);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var l={mixins:[o(46).a],props:{proposal:{type:Object,default:null}},data:function(){return{discussionNode:null,showDetails:!1,action:null,loading:!1,waitingForVoteTransaction:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(r.b)(["account"])),mounted:function(){var t=this;this.loading=!0,this.$github.getDiscussionById(this.proposal.id).then((function(e){e&&(t.discussionNode={title:e.title,url:e.url})})).finally((function(){return t.loading=!1}))},methods:{changeAction:function(t){this.action===t?this.action=null:this.action=t},castVote:function(t){var e=this;this.waitingForVoteTransaction=!0,this.octobayGovToken(this.proposal.department.tokenAddress).methods.balanceOfAsPercentAt(this.account,this.proposal.balanceSnapshotId).call().then((function(o){e.octobayGovernor.methods.castVote(e.proposal.department.projectId,e.proposal.count,t?-1*o:o).send({from:e.account}).then((function(){e.waitingForVoteTransaction=!1,setTimeout((function(){e.$store.dispatch("updateDepartments")}),3e3)}))}))}}},d=(o(839),o(9)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[!t.loading&&t.discussionNode?o("div",{class:["issue d-flex flex-column",{showDetails:t.showDetails}],on:{click:function(e){t.showDetails=!t.showDetails}}},[o("div",{staticClass:"position-relative"},[o("div",{staticClass:"d-flex flex-column align-items-top px-3 py-2"},[o("div",{class:["d-flex flex-column",{"text-truncate":!t.showDetails}]},[t._m(0),t._v(" "),o("div",{class:{"text-truncate":!t.showDetails}},[o("b",[t._v(t._s(t.discussionNode.title))])]),t._v(" "),o("div",{staticClass:"flex-fill rounded-lg position-relative my-1",staticStyle:{"background-color":"#ddd"}},[o("div",{staticClass:"bg-success rounded-lg position-relative",style:"height: 5px; width: "+(t.proposal.votes.reduce((function(a,b){return a+b.percentage}),0)/100).toFixed(2)+"%; z-index: 2"}),t._v(" "),o("div",{staticClass:"bg-warning rounded-lg position-absolute",style:"height: 5px; width: "+(t.proposal.quorum/100).toFixed(2)+"%; top: 0; z-index: 1"})]),t._v(" "),o("div",{staticClass:"d-flex justify-content-between"},[o("small",{staticClass:"text-muted text-center"},[t._v("\n              Quorum"),o("br"),t._v(" "),o("b",[t._v(t._s((t.proposal.quorum/100).toFixed(2))+" %")])]),t._v(" "),o("small",{staticClass:"text-muted text-center"},[t._v("\n              Current"),o("br"),t._v(" "),o("b",[t._v("\n                "+t._s((t.proposal.votes.reduce((function(a,b){return a+b.percentage}),0)/100).toFixed(2))+"\n                %\n              ")])]),t._v(" "),o("small",{staticClass:"text-muted text-center"},[t._v("\n              Days left"),o("br"),t._v(" "),o("b",[t._v("\n                "+t._s(((t.proposal.endDate-t.proposal.startDate)/86400).toFixed(1))+"\n              ")])])])])])]),t._v(" "),o("transition",{attrs:{name:"fade"}},[t.showDetails?o("div",{class:["d-flex flex-column justify-content-start align-items-center"],staticStyle:{cursor:"default"},on:{click:function(t){t.stopPropagation()}}},[o("div",{staticClass:"border-top border-bottom w-100 py-2 text-nowrap d-flex justify-content-between align-items-center px-4"},[o("div",[o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Vote for proposal",trigger:"hover"},expression:"{ content: 'Vote for proposal', trigger: 'hover' }"}],staticClass:"btn btn-sm btn-success",attrs:{disabled:t.waitingForVoteTransaction},on:{click:function(e){return t.castVote(!1)}}},[t.waitingForVoteTransaction?o("font-awesome-icon",{attrs:{icon:["fas","circle-notch"],spin:""}}):o("font-awesome-icon",{attrs:{icon:["fas","thumbs-up"]}})],1),t._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Vote against proposal",trigger:"hover"},expression:"{\n                content: 'Vote against proposal',\n                trigger: 'hover',\n              }"}],staticClass:"btn btn-sm btn-danger",attrs:{disabled:t.waitingForVoteTransaction},on:{click:function(e){return t.castVote(!0)}}},[t.waitingForVoteTransaction?o("font-awesome-icon",{attrs:{icon:["fas","circle-notch"],spin:""}}):o("font-awesome-icon",{attrs:{icon:["fas","thumbs-down"]}})],1)]),t._v(" "),o("div",[o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"See all Votes",trigger:"hover"},expression:"{ content: 'See all Votes', trigger: 'hover' }"}],class:["btn btn-sm btn-light text-muted",{active:"votes"===t.action}],on:{click:function(e){return t.changeAction("votes")}}},[o("font-awesome-icon",{attrs:{icon:["fas","vote-yea"]}})],1),t._v(" "),o("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Show Discussion on GitHub<br><span class='text-dark'><small class='d-flex justify-content-center my-2'>Has been altered after submission.<br>Check edit log on GitHub.</small></span><img src='/edit-log.png' class='w-100' />",trigger:"hover"},expression:"{\n                content:\n                  'Show Discussion on GitHub<br><span class=\\'text-dark\\'><small class=\\'d-flex justify-content-center my-2\\'>Has been altered after submission.<br>Check edit log on GitHub.</small></span><img src=\\'/edit-log.png\\' class=\\'w-100\\' />',\n                trigger: 'hover',\n              }"}],staticClass:"btn btn-sm btn-light text-muted",attrs:{href:t.discussionNode.url,target:"_blank"}},[o("font-awesome-icon",{attrs:{icon:["fab","github"]}}),t._v(" "),o("font-awesome-icon",{staticClass:"text-muted-light ml-1",attrs:{icon:["fas","external-link-alt"]}})],1)])]),t._v(" "),o("div",{staticClass:"w-100 px-3"},[o("transition",{attrs:{name:"fade",mode:"out-in"}},["votes"===t.action?o("div",{key:"holders",staticClass:"py-3"},[t.proposal.votes.length?o("div",t._l(t.proposal.votes,(function(e){return o("div",{key:e.id,staticClass:"d-flex justify-content-between"},[o("small",[o("AddressShort",{staticClass:"text-muted",attrs:{address:e.holder.ethAddress}})],1),t._v(" "),o("small",{class:"text-"+(e.percentage>0?"success":"danger")},[t._v(t._s((e.percentage/100).toFixed(2))+" %")])])})),0):o("small",{staticClass:"text-muted d-block text-center"},[t._v("\n                No votes for this proposal yet.\n              ")])]):t._e()])],1)]):t._e()])],1):t.loading?o("div",{staticClass:"d-flex justify-content-center p-4 m-3 rounded-lg"},[o("font-awesome-icon",{staticClass:"text-muted-light",attrs:{icon:["fas","circle-notch"],spin:""}})],1):t.loading||t.discussionNode?t._e():o("div",{staticClass:"d-flex justify-content-center p-3 rounded-lg"},[o("small",{staticClass:"text-muted d-block text-center border rounded-xl px-3 py-1"},[o("small",[o("font-awesome-icon",{attrs:{icon:["fas","exclamation-triangle"]}})],1),t._v("\n      No Discussion found for Proposal.\n    ")])])])}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("small",{staticClass:"text-muted text-truncate"},[o("small",[t._v("octobay/app")])])}],!1,null,"fe75e228",null);e.default=component.exports;installComponents(component,{AddressShort:o(384).default})},850:function(t,e,o){"use strict";o(838)},851:function(t,e,o){var n=o(27)(!1);n.push([t.i,".proposal-list[data-v-79a92e78]{margin:0 -1.25rem}.proposal-list>a[data-v-79a92e78]{border:1px solid eee;color:#333}.proposal-list>a[data-v-79a92e78]:hover{border-color:transparent;background:#0366d6;color:#fff}.proposal-list>a:hover .text-danger[data-v-79a92e78],.proposal-list>a:hover .text-muted[data-v-79a92e78]{color:#fff!important}.proposal-list>a:hover .badge-pill[data-v-79a92e78]{background:#fff;color:#0366d6}",""]),t.exports=n},862:function(t,e,o){"use strict";o.r(e);o(143),o(219);var n=o(221),r=o(0),c=o(14);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={mixins:[o(46).a],computed:d(d({},Object(c.b)(["ownDepartments"])),{},{selectedDepartment:{get:function(){return this.$store.state.selectedDepartment},set:function(t){this.$store.commit("setSelectedDepartment",t)}},filteredProposals:function(){return this.selectedDepartment?this.selectedDepartment.proposals:this.ownDepartments.reduce((function(t,e){return[].concat(Object(n.a)(t),Object(n.a)(e.proposals))}),[])}})},v=(o(850),o(9)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"card-body"},[o("ConnectActionButton",{attrs:{action:function(){return t.openModal("ModalNewProposal")},required:["wallet"],size:"lg"}},[t._v("\n      New Proposal\n    ")])],1),t._v(" "),o("div",{staticClass:"card-body border-top"},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedDepartment,expression:"selectedDepartment"}],staticClass:"custom-select rounded-xl",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedDepartment=e.target.multiple?o:o[0]}}},[o("option",{domProps:{value:null}},[t._v("Select Department")]),t._v(" "),t._l(t.ownDepartments,(function(e){return o("option",{key:e.address,domProps:{value:e}},[t._v("\n        "+t._s(e.name)+"\n      ")])}))],2)]),t._v(" "),o("div",{staticClass:"card-body pt-0"},[t.filteredProposals.length?o("div",{staticClass:"proposal-list"},t._l(t.filteredProposals,(function(t){return o("Proposal",{key:t.id,attrs:{proposal:t}})})),1):o("div",{staticClass:"text-center text-muted my-3"},[t._v("\n      Currently no proposals.\n    ")])])])}),[],!1,null,"79a92e78",null);e.default=component.exports;installComponents(component,{ConnectActionButton:o(386).default,Proposal:o(846).default})},885:function(t,e,o){"use strict";o.r(e);var n=o(0),r=o(14);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var l={transition:"fade",computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(r.b)(["view"])),mounted:function(){this.$store.commit("setView","departments")}},d=o(9),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content card overflow-hidden border-0 shadow-lg"},[o("div",{staticClass:"d-flex justify-content-around mt-4 px-2 font-weight-bold"},[o("button",{class:"btn btn-link mx-2 text-"+("departments"===t.view?"primary":"muted"),on:{click:function(e){return t.$store.commit("setView","departments")}}},[t._v("\n      Departments\n    ")]),t._v(" "),o("button",{class:"btn btn-link mx-2 text-"+("proposals"===t.view?"primary":"muted"),on:{click:function(e){return t.$store.commit("setView","proposals")}}},[t._v("\n      Proposals\n    ")])]),t._v(" "),o("transition",{attrs:{name:"fade",mode:"out-in"}},[o("keep-alive",["departments"==t.view?o("Departments"):t._e(),t._v(" "),"proposals"==t.view?o("Proposals"):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Departments:o(883).default,Proposals:o(862).default})}}]);