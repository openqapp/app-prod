(window.webpackJsonp=window.webpackJsonp||[]).push([[0,6,8,19,20],{819:function(t,e,n){var content=n(822);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(32).default)("59e995c8",content,!0,{sourceMap:!1})},820:function(t,e,n){"use strict";n.r(e);var o={props:{githubUserId:{type:String,default:""},fromAddress:{type:String,default:""},forceShowAddress:{type:Boolean,default:!1}},data:function(){return{githubUser:null}},mounted:function(){var t=this;this.githubUserId?this.$axios.$get("https://octobay.uber.space/github/user-by-id/"+this.githubUserId).then((function(e){e&&(t.githubUser=e)})):this.fromAddress&&this.$axios.$get("https://octobay.uber.space/graph/user-by-address/"+this.fromAddress).then((function(e){e&&t.$axios.$get("https://octobay.uber.space/github/user-by-id/"+e).then((function(e){e&&(t.githubUser=e)}))}))}},r=n(11),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.githubUser?n("div",{staticClass:"d-flex align-items-center"},[n("GithubAvatar",{attrs:{"profile-url":t.githubUser.url,"avatar-url":t.githubUser.avatarUrl}}),t._v(" "),n("div",{staticClass:"d-flex flex-column"},[n("a",{staticClass:"font-weight-bold",attrs:{href:t.githubUser.url,target:"_blank"}},[t._v("\n        "+t._s(t.githubUser.login)+"\n      ")]),t._v(" "),t.fromAddress&&t.forceShowAddress?n("a",{staticClass:"d-flex text-muted",attrs:{href:"https://etherscan.com/address/"+t.fromAddress,target:"_blank"}},[n("small",[n("AddressShort",{attrs:{address:t.fromAddress}})],1)]):t._e()])],1):t.fromAddress?n("div",[n("a",{staticClass:"font-weight-bold",attrs:{href:"https://etherscan.com/address/"+t.fromAddress,target:"_blank"}},[n("AddressShort",{attrs:{address:t.fromAddress}})],1)]):n("div",[n("font-awesome-icon",{staticClass:"text-muted-light",attrs:{icon:["fas","circle-notch"],spin:""}})],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{GithubAvatar:n(383).default,AddressShort:n(382).default})},821:function(t,e,n){"use strict";n(819)},822:function(t,e,n){var o=n(31)(!1);o.push([t.i,"small[data-v-7e22a679]{font-size:70%}",""]),t.exports=o},823:function(t,e,n){"use strict";n.r(e);n(821);var o=n(11),component=Object(o.a)({},(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex w-100 justify-content-around align-items-center text-center px-2"},[n("small",{staticClass:"w-25 text-nowrap text-muted px-1"},[t._v("\n    Manage"),n("br"),t._v("Permissions\n  ")]),t._v(" "),n("small",{staticClass:"w-25 text-nowrap text-muted px-1"},[t._v("\n    Transfer this"),n("br"),t._v("Permission\n  ")]),t._v(" "),n("small",{staticClass:"w-25 text-nowrap text-muted px-1"},[t._v("\n    Manage"),n("br"),t._v("Bounties\n  ")]),t._v(" "),n("small",{staticClass:"w-25 text-nowrap text-muted px-1"},[t._v("\n    Create"),n("br"),t._v("Proposals\n  ")])])}],!1,null,"7e22a679",null);e.default=component.exports},824:function(t,e,n){"use strict";n.r(e);var o={props:{nft:{type:Object,default:null},perms:{type:Array,default:function(){return[]}}}},r=n(11),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-content-around align-items-center px-2"},[n("div",{staticClass:"text-center w-25"},[t.nft&&t.nft.permissions.includes("MINT")||t.perms[0]?n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["fas","ban"]}})],1),t._v(" "),n("div",{staticClass:"text-center w-25"},[t.nft&&t.nft.permissions.includes("TRANSFER")||t.perms[1]?n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["fas","ban"]}})],1),t._v(" "),n("div",{staticClass:"text-center w-25"},[t.nft&&t.nft.permissions.includes("SET_ISSUE_GOVTOKEN")||t.perms[2]?n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["fas","ban"]}})],1),t._v(" "),n("div",{staticClass:"text-center w-25"},[t.nft&&t.nft.permissions.includes("CREATE_PROPOSAL")||t.perms[3]?n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["fas","ban"]}})],1)])}),[],!1,null,null,null);e.default=component.exports},827:function(t,e,n){var content=n(839);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(32).default)("05428c28",content,!0,{sourceMap:!1})},838:function(t,e,n){"use strict";n(827)},839:function(t,e,n){var o=n(31)(!1);o.push([t.i,".department[data-v-4e817152]{border-top:1px solid fff;cursor:pointer;position:relative}.department[data-v-4e817152]:hover{background:#f8f8f8}.department.showDetails[data-v-4e817152]{background:#f8f8f8;box-shadow:inset 0 0 7px rgba(0,0,0,.2)}.department.showDetails .details[data-v-4e817152]{max-height:40px;cursor:default}.department.showDetails .details.action[data-v-4e817152]{max-height:100px}.department.showDetails .details.deposits[data-v-4e817152]{max-height:350px}",""]),t.exports=o},848:function(t,e,n){var content=n(860);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(32).default)("346319c8",content,!0,{sourceMap:!1})},850:function(t,e,n){"use strict";n.r(e);n(219),n(106),n(21),n(107),n(103);var o=n(1),r=n(14);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={mixins:[n(46).a],props:{department:{type:Object,default:null}},data:function(){return{projectNode:null,showDetails:!1,action:null,loading:!1,requiredSharesToCreateProposals:0,minQuorum:0,showUpdateGovTokenParamsSuccess:!1,updatingGovTokenParams:!1,totalSupply:null,copyAddressSuccess:!1}},computed:l(l({},Object(r.b)(["account","nfts"])),{},{canManageNFTs:function(){var t=this;return this.department.creator===this.account||!!this.nfts.find((function(e){return e.permissions.includes("MINT")&&e.department.id===t.department.id}))}}),mounted:function(){var t=this;this.$store.dispatch("updateNFTs"),this.requiredSharesToCreateProposals=this.department.requiredSharesToCreateProposals/100,this.minQuorum=this.department.minQuorum/100,this.loading=!0,this.loadProjectById(this.department.projectId).then((function(e){e&&(t.projectNode={id:e.id,owner:"octobay",repository:"app",title:"Security"})})).finally((function(){return t.loading=!1})),this.octobayGovToken(this.department.tokenAddress).methods.totalSupply().call().then((function(e){t.totalSupply=e}))},methods:{showProposals:function(){this.$store.commit("setView","proposals"),this.$store.commit("setSelectedDepartment",this.department)},changeAction:function(t){this.action===t?this.action=null:this.action=t},copiedAddress:function(){var t=this;this.copyAddressSuccess=!0,setTimeout((function(){t.copyAddressSuccess=!1}),1e3)},updateGovTokenParams:function(){var t=this;this.updatingGovTokenParams=!0,this.octobay.methods.updateGovTokenParams(this.department.tokenAddress,this.requiredSharesToCreateProposals,this.minQuorum).send({from:this.account}).then((function(){t.showUpdateGovTokenParamsSuccess=!0})).finally((function(){t.updatingGovTokenParams=!1}))}}},m=(n(838),n(11)),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[!t.loading&&t.projectNode?n("div",{class:["department d-flex flex-column",{showDetails:t.showDetails}],on:{click:function(e){t.showDetails=!t.showDetails}}},[n("div",{staticClass:"position-relative"},[n("div",{staticClass:"d-flex flex-column align-items-top px-3 py-2"},[n("div",{class:["d-flex flex-column",{"text-truncate":!t.showDetails}]},[n("small",{staticClass:"text-muted text-truncate"},[n("small",[t._v("\n              "+t._s(t.projectNode.owner)+"/"+t._s(t.projectNode.repository)+"\n            ")])]),t._v(" "),n("div",{class:{"text-truncate":!t.showDetails}},[n("b",[t._v(t._s(t.department.name))]),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("("+t._s(t.department.symbol)+")")])])]),t._v(" "),t.showDetails?n("div",{staticClass:"d-flex flex-column"},[n("div",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.department.tokenAddress,expression:"department.tokenAddress"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copiedAddress,expression:"copiedAddress",arg:"success"}],staticClass:"text-muted text-truncate btn btn-sm bg-white shadow-xs font-weight-normal mt-2 mb-1",on:{click:function(t){t.stopPropagation()}}},[n("small",{staticClass:"d-flex justify-content-between align-items-center"},[n("AddressShort",{attrs:{address:t.department.tokenAddress,length:"long"}}),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.copyAddressSuccess?n("font-awesome-icon",{key:"check",staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{key:"copy",attrs:{icon:["far","copy"]}})],1)],1)]),t._v(" "),n("div",{staticClass:"mt-2 d-flex justify-content-between"},[n("small",{staticClass:"text-muted text-center"},[t._v("\n              Current supply"),n("br"),t._v(" "),n("b",[null!==t.totalSupply?n("span",[t._v("\n                  "+t._s(t.$web3utils.fromWei(t.totalSupply,"ether"))+"\n                ")]):n("font-awesome-icon",{attrs:{icon:["fas","circle-notch"],spin:""}})],1)]),t._v(" "),n("small",{staticClass:"text-muted text-center"},[t._v("\n              Holders"),n("br"),t._v(" "),n("b",[t._v(t._s(t.department.holders.length))])]),t._v(" "),n("small",{staticClass:"text-muted text-center"},[t._v("\n              Average holdings"),n("br"),t._v(" "),t.department.holders.length?n("b",[t._v("\n                "+t._s((Number(t.$web3utils.fromWei(t.totalSupply,"ether"))/t.department.holders.length).toFixed(0))+"\n              ")]):n("b",[t._v("0")])])])]):t._e()])]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.showDetails?n("div",{class:["d-flex flex-column justify-content-start align-items-center"],staticStyle:{cursor:"default"},on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"border-top border-bottom w-100 py-2 text-nowrap d-flex justify-content-between align-items-center px-4"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Proposals",trigger:"hover"},expression:"{ content: 'Proposals', trigger: 'hover' }"}],staticClass:"btn btn-sm btn-light text-muted",on:{click:function(e){return t.showProposals()}}},[n("font-awesome-icon",{attrs:{icon:["fas","comments"]}})],1),t._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Token Holders",trigger:"hover"},expression:"{ content: 'Token Holders', trigger: 'hover' }"}],class:["btn btn-sm btn-light text-muted",{active:"holders"===t.action}],on:{click:function(e){return t.changeAction("holders")}}},[n("font-awesome-icon",{attrs:{icon:["fas","users"]}})],1),t._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Permissions",trigger:"hover"},expression:"{ content: 'Permissions', trigger: 'hover' }"}],class:["btn btn-sm btn-light text-muted",{active:"nfts"===t.action}],on:{click:function(e){return t.changeAction("nfts")}}},[n("font-awesome-icon",{attrs:{icon:["fas","key"]}})],1),t._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"Settings",trigger:"hover"},expression:"{ content: 'Settings', trigger: 'hover' }"}],class:["btn btn-sm btn-light text-muted",{active:"settings"===t.action}],on:{click:function(e){return t.changeAction("settings")}}},[n("font-awesome-icon",{attrs:{icon:["fas","cog"]}})],1)]),t._v(" "),n("div",{staticClass:"w-100"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},["holders"===t.action?n("div",{key:"holders",staticClass:"p-3"},[t.department.holders.length?n("div",t._l(t.department.holders,(function(e){return n("div",{key:e.id,staticClass:"d-flex justify-content-between"},[n("small",[n("AddressShort",{staticClass:"text-muted",attrs:{address:e.ethAddress}})],1),t._v(" "),n("small",[t._v("\n                    "+t._s(t.$web3utils.fromWei(e.balance,"ether"))+"\n                    "+t._s(t.department.symbol)+"\n                  ")])])})),0):n("div",{staticClass:"text-muted text-center"},[n("small",[t._v("No token holders yet.")])])]):t._e(),t._v(" "),"nfts"===t.action?n("div",{key:"nfts",staticClass:"pt-3"},[t.canManageNFTs?n("div",{staticClass:"px-3 pb-3 border-bottom-light"},[n("button",{staticClass:"btn btn-sm btn-primary w-100 shadow-sm",on:{click:function(e){return t.openModal("ModalNewNFT",!1,t.department)}}},[t._v("\n                  New Permission\n                ")])]):t._e(),t._v(" "),t.department.nfts.length?n("div",{staticStyle:{"min-width":"360px"}},[n("NFTPermissionLabels",{staticClass:"py-2"}),t._v(" "),t._l(t.department.nfts,(function(e){return n("div",{key:e.id,staticClass:"py-2 border-top-light"},[n("div",{staticClass:"d-flex justify-content-between align-items-center pb-2 px-3"},[n("small",{staticClass:"mr-2"},[n("GithubUser",{attrs:{"from-address":e.ownerAddress,"force-show-address":!0}})],1),t._v(" "),t.canManageNFTs?n("div",{staticClass:"btn-group shadow-sm rounded-xl ml-2"},[n("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(n){return t.openModal("ModalTransferNFT",!1,e)}}},[n("font-awesome-icon",{attrs:{icon:["fas","share"]}}),t._v("\n                        Transfer\n                      ")],1),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(n){return t.openModal("ModalBurnNFT",!1,e)}}},[n("font-awesome-icon",{attrs:{icon:["fas","fire"]}}),t._v("\n                        Burn\n                      ")],1)]):t._e()]),t._v(" "),n("NFTPermissions",{attrs:{nft:e}})],1)}))],2):n("div",{staticClass:"text-muted text-center"},[n("small",[t._v("No Permissions yet.")])])]):t._e(),t._v(" "),"settings"===t.action?n("div",{key:"settings",staticClass:"p-3"},[n("div",{staticClass:"d-flex align-items-end"},[n("div",{staticClass:"mr-1"},[n("small",{staticClass:"d-block text-center mb-2"},[t._v("\n                    Shares to"),n("br"),t._v("create proposals\n                  ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.requiredSharesToCreateProposals,expression:"requiredSharesToCreateProposals"}],staticClass:"form-control form-control-sm form-control-with-embed mb-2 w-50 mx-auto",attrs:{type:"text",placeholder:"1-100 %"},domProps:{value:t.requiredSharesToCreateProposals},on:{input:function(e){e.target.composing||(t.requiredSharesToCreateProposals=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"ml-1"},[n("small",{staticClass:"d-block text-center mb-2"},[t._v("\n                    Minimum"),n("br"),t._v("Quorum\n                  ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.minQuorum,expression:"minQuorum"}],staticClass:"form-control form-control-sm form-control-with-embed mb-2 w-50 mx-auto",attrs:{type:"text",placeholder:"1-100 %"},domProps:{value:t.minQuorum},on:{input:function(e){e.target.composing||(t.minQuorum=e.target.value)}}})])]),t._v(" "),t.showUpdateGovTokenParamsSuccess?n("div",{staticClass:"alert alert-success border-0 mt-2"},[n("button",{staticClass:"close text-success",attrs:{type:"button"},on:{click:function(e){t.showUpdateGovTokenParamsSuccess=!1}}},[n("span",[t._v("×")])]),t._v(" "),n("font-awesome-icon",{attrs:{icon:["fas","check"]}}),t._v("\n                Settings updated! :)\n              ")],1):t._e(),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary w-100 mt-2 shadow-sm",attrs:{disabled:t.updatingGovTokenParams},on:{click:function(e){return t.updateGovTokenParams()}}},[t.updatingGovTokenParams?n("font-awesome-icon",{attrs:{icon:["fas","circle-notch"],spin:""}}):t._e(),t._v("\n                "+t._s(t.updatingGovTokenParams?"Waiting for confirmation...":"Save")+"\n              ")],1)]):t._e()])],1)]):t._e()])],1):t.loading?n("div",{staticClass:"d-flex justify-content-center p-4 m-3 rounded-lg"},[n("font-awesome-icon",{staticClass:"text-muted-light",attrs:{icon:["fas","circle-notch"],spin:""}})],1):t.loading||t.projectNode?t._e():n("div",{staticClass:"d-flex justify-content-center p-3 rounded-lg"},[n("small",{staticClass:"text-muted d-block text-center border rounded-xl px-3 py-1"},[n("small",[n("font-awesome-icon",{attrs:{icon:["fas","exclamation-triangle"]}})],1),t._v("\n      Project not found.\n    ")])])])}),[],!1,null,"4e817152",null);e.default=component.exports;installComponents(component,{AddressShort:n(382).default,NFTPermissionLabels:n(823).default,GithubUser:n(820).default,NFTPermissions:n(824).default})},859:function(t,e,n){"use strict";n(848)},860:function(t,e,n){var o=n(31)(!1);o.push([t.i,".department-list[data-v-185a2459]{margin:0 -1.25rem}.department-list>a[data-v-185a2459]{border:1px solid eee;color:#333}.department-list>a[data-v-185a2459]:hover{border-color:transparent;background:#0366d6;color:#fff}.department-list>a:hover .text-danger[data-v-185a2459],.department-list>a:hover .text-muted[data-v-185a2459]{color:#fff!important}.department-list>a:hover .badge-pill[data-v-185a2459]{background:#fff;color:#0366d6}",""]),t.exports=o},870:function(t,e,n){"use strict";n.r(e);var o=n(1),r=n(14);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var l={mixins:[n(46).a],computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(r.b)(["ownDepartments"])),mounted:function(){this.$store.dispatch("updateDepartments")}},d=(n(859),n(11)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card-body pb-0"},[t.ownDepartments.length?n("div",{staticClass:"department-list"},t._l(t.ownDepartments,(function(t){return n("Department",{key:t.address,attrs:{department:t}})})),1):n("div",{staticClass:"text-center text-muted my-3"},[t._v("\n      You have not created any"),n("br"),t._v("departments yet.\n    ")])]),t._v(" "),n("div",{staticClass:"card-body"},[n("ConnectActionButton",{attrs:{action:function(){return t.openModal("ModalNewDepartment")},size:"lg"}},[t._v("\n      New Department\n    ")])],1)])}),[],!1,null,"185a2459",null);e.default=component.exports;installComponents(component,{Department:n(850).default,ConnectActionButton:n(384).default})}}]);