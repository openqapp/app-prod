(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{846:function(t,e,n){t.exports=n(866).default},847:function(t,e,n){(function(e){t.exports={getEnvDefault:(t,n)=>{if(!t){if(e.env[n])return e.env[n];throw Error(`OctoBay Adapters: Parameter not set! (${n})`)}return t}}}).call(this,n(13))},864:function(t,e,n){t.exports={githubAccessToken:n(865),bountyIsReleased:n(868),addressRepoExists:n(869)}},865:function(t,e,n){const r=n(101),o=n(846),{getEnvDefault:c}=n(847);o(r,{retries:3,retryDelay:o.exponentialDelay}),t.exports=(code,t="",e="")=>(t=c(t,"GITHUB_CLIENT_ID"),e=c(e,"GITHUB_CLIENT_SECRET"),r.post("https://github.com/login/oauth/access_token",{client_id:t,client_secret:e,code:code,accept:"application/json"}).then((t=>{const data=new URLSearchParams(t.data);return data.get("error")?{error:`${data.get("error")}: ${data.get("error_description")}`,accessToken:null}:{error:null,accessToken:data.get("access_token")}})).catch((t=>{throw t})))},866:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNetworkError=l,e.isRetryableError=_,e.isSafeRequestError=m,e.isIdempotentRequestError=E,e.isNetworkOrIdempotentRequestError=v,e.exponentialDelay=R,e.default=A;var r,o=n(867),c=(r=o)&&r.__esModule?r:{default:r};var d="axios-retry";function l(t){return!t.response&&Boolean(t.code)&&"ECONNABORTED"!==t.code&&(0,c.default)(t)}var f=["get","head","options"],h=f.concat(["put","delete"]);function _(t){return"ECONNABORTED"!==t.code&&(!t.response||t.response.status>=500&&t.response.status<=599)}function m(t){return!!t.config&&(_(t)&&-1!==f.indexOf(t.config.method))}function E(t){return!!t.config&&(_(t)&&-1!==h.indexOf(t.config.method))}function v(t){return l(t)||E(t)}function T(){return 0}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=100*Math.pow(2,t),n=.2*e*Math.random();return e+n}function C(t){var e=t[d]||{};return e.retryCount=e.retryCount||0,t[d]=e,e}function A(t,e){t.interceptors.request.use((function(t){return C(t).lastRequestTime=Date.now(),t})),t.interceptors.response.use(null,(function(n){var r=n.config;if(!r)return Promise.reject(n);var o=function(t,e){return Object.assign({},e,t[d])}(r,e),c=o.retries,l=void 0===c?3:c,f=o.retryCondition,h=void 0===f?v:f,_=o.retryDelay,m=void 0===_?T:_,E=o.shouldResetTimeout,R=void 0!==E&&E,A=C(r);if(h(n)&&A.retryCount<l){A.retryCount+=1;var y=m(A.retryCount,n);if(function(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}(t,r),!R&&r.timeout&&A.lastRequestTime){var w=Date.now()-A.lastRequestTime;r.timeout=Math.max(r.timeout-w-y,1)}return r.transformRequest=[function(data){return data}],new Promise((function(e){return setTimeout((function(){return e(t(r))}),y)}))}return Promise.reject(n)}))}A.isNetworkError=l,A.isSafeRequestError=m,A.isIdempotentRequestError=E,A.isNetworkOrIdempotentRequestError=v,A.exponentialDelay=R,A.isRetryableError=_},867:function(t,e,n){"use strict";var r=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE","EHOSTUNREACH","EAI_AGAIN"],o=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"];t.exports=function(t){return!t||!t.code||(-1!==r.indexOf(t.code)||-1===o.indexOf(t.code))}},868:function(t,e,n){const r=n(101),o=n(846),{getEnvDefault:c}=n(847);o(r,{retries:3,retryDelay:o.exponentialDelay});const d=(t,e,n=null,o={closedEvents:[],body:""})=>r.post("https://api.github.com/graphql",{query:`query($issueId:String!) {\n            rateLimit {\n            limit\n            cost\n            remaining\n            resetAt\n            }\n            node(id: $issueId) {\n            ... on Issue {\n                body\n                timelineItems(itemTypes: [CLOSED_EVENT], first: 1${n?', after: "'+n+'"':""}) {\n                pageInfo {\n                    hasNextPage\n                    endCursor\n                }\n                nodes {\n                    ... on ClosedEvent {\n                    closer {\n                        ... on PullRequest {\n                        author {\n                            login\n                        }\n                        }\n                    }\n                    }\n                }\n                }\n            }\n            }\n        }`,variables:{issueId:e}},{headers:{Authorization:"bearer "+t}}).then((n=>(o.body=n.data.data.node.body,o.closedEvents.push(...n.data.data.node.timelineItems.nodes),n.data.data.node.timelineItems.pageInfo.hasNextPage?d(t,e,n.data.data.node.timelineItems.pageInfo.endCursor,o):o))).catch((t=>{throw t}));t.exports=(t,e,n="")=>(n=c(n,"GITHUB_PERSONAL_ACCESS_TOKEN"),d(n,e).then((e=>{let n=!1;e.closedEvents.forEach((e=>{e.closer&&e.closer.author.login===t&&(n=!0)}));const r=new RegExp(`^(\\s+)?@OctoBay([ ]+)release([ ]+)to([ ]+)@${t}(\\s+)?$`,"igm");return{releasedByCommand:!!e.body.match(r),releasedByPullRequest:n}})).catch((t=>{throw t})))},869:function(t,e,n){const r=n(101),o=n(846),{getEnvDefault:c}=n(847);o(r,{retries:3,retryDelay:o.exponentialDelay}),t.exports=(t,e,n="")=>{if(!e.startsWith("0x")||42===!e.length)throw Error(`OctoBay Adapters: Invalid ETH address. (${e})`);return n=c(n,"GITHUB_PERSONAL_ACCESS_TOKEN"),r.post("https://api.github.com/graphql",{query:"query($githubUser:String!, $ethAddress:String!) {\n            repository(owner: $githubUser, name: $ethAddress) {\n              name\n            }\n        }",variables:{githubUser:t,ethAddress:e}},{headers:{Authorization:"bearer "+n}}).then((t=>!!t.data.data.repository)).catch((t=>{throw t}))}},880:function(t,e,n){"use strict";n.r(e);n(106),n(64),n(107),n(103);var r=n(1),o=n(14),c=n(864);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var l={mixins:[n(46).a],data:function(){return{verificationSuccess:!1,waitingForOracleRequest:!1,waitingForOracleFulfillment:!1,copyAddressSuccess:null,checkingRepo:!0,repoExists:!1,checkRepoInterval:null,registerRequestID:null,nftTransferAddress:{},transferingNFT:null,showTransferNFTsuccess:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)(["connected","account","nfts","githubUser","githubAccessToken"])),watch:{account:function(){this.$store.dispatch("updateNFTs"),this.checkRepo()}},mounted:function(){var t=this;this.$store.dispatch("updateNFTs"),this.checkRepo(),this.checkRepoInterval=setInterval((function(){return t.checkRepo()}),1e4)},methods:{checkRepo:function(){var t=this;this.connected&&this.githubUser&&!this.githubUser.ethAddresses.map((function(a){return a.address})).includes(this.account)&&Object(c.addressRepoExists)(this.githubUser.login,this.account,this.githubAccessToken).then((function(e){setTimeout((function(){t.repoExists=e,t.repoExists&&(t.checkingRepo=!1,clearInterval(t.checkRepoInterval))}),1e3)})).catch((function(e){t.repoExists=!1}))},register:function(){var t=this;this.oracleRequest(this.octobay.methods.registerUserAddress,[this.githubUser.node_id],(function(e){return t.waitingForOracleRequest=e}),(function(e){return t.waitingForOracleFulfillment=e})).then((function(){t.verificationSuccess=!0,t.$store.dispatch("updateGithubUser")}))},transferNft:function(t,e){var n=this;this.transferingNFT=t.id,this.octobayGovNFT.methods.safeTransferFrom(this.account,e,t.id).send({from:this.account}).then((function(){n.showTransferNFTsuccess=!0,setTimeout((function(){n.$store.dispatch("updateNFTs").then((function(){n.transferingNFT=null,setTimeout((function(){return n.showTransferNFTsuccess=!1}),3e3)}))}),3e3)})).catch((function(){return n.transferingNFT=null}))},copiedAddress:function(address){var t=this;this.copyAddressSuccess=address,setTimeout((function(){t.copyAddressSuccess=null}),1e3)},githubLogout:function(){this.closeModal(),this.$store.dispatch("githubLogout")}}},f=n(11),component=Object(f.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card shadow-sm d-flex flex-column",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"text-center text-muted-light m-0"},[t._v("Wallet")]),t._v(" "),t.verificationSuccess?n("div",{staticClass:"alert alert-success mb-0"},[n("font-awesome-icon",{attrs:{icon:["fas","check"]}}),t._v("\n      Verification successful! :)\n    ")],1):t._e()]),t._v(" "),n("div",{staticClass:"card-body px-0 border-top-light border-bottom-light"},[n("div",{staticClass:"d-flex justify-content-center align-items-center px-3"},[n("GithubAvatar",{attrs:{"profile-url":t.githubUser.html_url,"avatar-url":t.githubUser.avatar_url,size:"2.3rem"}}),t._v(" "),n("h4",{staticClass:"ml-2 mr-auto mb-0"},[n("a",{staticClass:"font-weight-bold",attrs:{href:t.githubUser.html_url,target:"_blank"}},[n("b",[t._v(t._s(t.githubUser.login))])])]),t._v(" "),n("button",{staticClass:"btn btn-light shadow-sm",on:{click:function(e){return t.githubLogout()}}},[t._v("\n        logout\n      ")])],1)]),t._v(" "),n("div",{staticClass:"card-body"},[t.githubUser.ethAddresses.length?n("div",[n("small",{staticClass:"text-muted d-block text-center"},[t._v("Verified Addresses")]),t._v(" "),t._l(t.githubUser.ethAddresses,(function(e){return n("div",{key:e.address},[n("div",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.address,expression:"regAddress.address"},{name:"clipboard",rawName:"v-clipboard:success",value:function(){return t.copiedAddress(e.address)},expression:"() => copiedAddress(regAddress.address)",arg:"success"}],class:"d-flex justify-content-between align-items-center btn mt-2 position-relative"+(e.address===t.account?" btn-dark text-white":" btn-light"),staticStyle:{"z-index":"1"}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.copyAddressSuccess===e.address?n("font-awesome-icon",{key:"check",staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{key:"copy",attrs:{icon:["far","copy"]}})],1),t._v(" "),n("b",{staticClass:"my-auto"},[n("AddressShort",{attrs:{address:e.address,length:"medium"}})],1),t._v(" "),e.address===t.account?n("i",{staticClass:"bg-success d-flex rounded-xl",staticStyle:{width:"8px",height:"8px"}}):n("i")],1),t._v(" "),e.address===t.account&&t.nfts.length?n("div",{staticClass:"border-light rounded-xl px-3 pb-3 position-relative",staticStyle:{"margin-top":"-36px","padding-top":"32px","z-index":"0"}},[n("transition",{attrs:{name:"fade"}},[t.showTransferNFTsuccess?n("div",{staticClass:"alert alert-success mt-3"},[n("font-awesome-icon",{attrs:{icon:["fas","check"]}}),t._v("\n              Permission transferred.\n            ")],1):t._e()]),t._v(" "),t._l(t.nfts,(function(e){return n("div",{key:e.id,staticClass:"mt-3 pt-1"},[n("b",{staticClass:"d-block text-center mb-2"},[n("b",[t._v(t._s(e.department.name))])]),t._v(" "),n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("small",[t._v("Manage Governance")]),t._v(" "),n("div",[e.permissions.includes("MINT")?n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["fas","ban"]}})],1)]),t._v(" "),n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("small",[t._v("Manage Bounties")]),t._v(" "),n("div",[e.permissions.includes("SET_ISSUE_GOVTOKEN")?n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["fas","ban"]}})],1)]),t._v(" "),n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("small",[t._v("Create Proposals")]),t._v(" "),n("div",[e.permissions.includes("CREATE_PROPOSAL")?n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["fas","ban"]}})],1)]),t._v(" "),e.permissions.includes("TRANSFER")?n("div",{staticClass:"mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.nftTransferAddress[e.id],expression:"nftTransferAddress[nft.id]"}],staticClass:"form-control form-contro-sm",attrs:{type:"text",placeholder:"Address"},domProps:{value:t.nftTransferAddress[e.id]},on:{input:function(n){n.target.composing||t.$set(t.nftTransferAddress,e.id,n.target.value)}}}),t._v(" "),n("button",{staticClass:"btn btn-primary shadow-sm w-100 mt-2",attrs:{disabled:t.transferingNFT||!t.$web3utils.isAddress(t.nftTransferAddress[e.id])},on:{click:function(n){return t.transferNft(e,t.nftTransferAddress[e.id])}}},[t.transferingNFT==e.id?n("font-awesome-icon",{staticClass:"text-muted-light",attrs:{icon:["fas","circle-notch"],spin:""}}):t._e(),t._v("\n                "+t._s(t.transferingNFT==e.id?"Waiting for confirmation...":"Transfer Permission")+"\n              ")],1)]):t._e()])}))],2):t._e()])}))],2):n("div",{staticClass:"alert bg-secondary text-white text-center"},[t._v("\n      To withdraw funds you need to fully verify your addresses."),n("br"),t._v(" "),n("br"),t._v("\n      Create a repository on GitHub, named after the address you are connected\n      with.\n    ")]),t._v(" "),t.githubUser.ethAddresses.length&&!t.githubUser.ethAddresses.map((function(a){return a.address})).includes(t.account)?n("div",{staticClass:"mt-3 alert bg-secondary text-white text-center"},[t._v("\n      You are connected to an address that has not been verified for this\n      GitHub account:\n    ")]):t._e(),t._v(" "),t.githubUser.ethAddresses.length&&!t.githubUser.ethAddresses.map((function(a){return a.address})).includes(t.account)?n("h5",{staticClass:"text-muted-light text-center pt-2"},[t._v("\n      Verify Address\n    ")]):t._e(),t._v(" "),t.githubUser&&t.connected&&!t.githubUser.ethAddresses.map((function(a){return a.address})).includes(t.account)?n("div",{staticClass:"pb-2"},[n("div",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.account,expression:"account"},{name:"clipboard",rawName:"v-clipboard:success",value:function(){return t.copiedAddress(t.account)},expression:"() => copiedAddress(account)",arg:"success"}],staticClass:"d-flex justify-content-between align-items-center btn btn-light mt-3"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.copyAddressSuccess===t.account?n("font-awesome-icon",{key:"check",staticClass:"text-success",attrs:{icon:["fas","check"]}}):n("font-awesome-icon",{key:"copy",attrs:{icon:["far","copy"]}})],1),t._v(" "),n("b",{staticClass:"my-auto"},[n("AddressShort",{attrs:{address:t.account,length:"medium"}})],1),t._v(" "),n("i")],1),t._v(" "),t.repoExists?n("a",{staticClass:"d-flex justify-content-between align-items-center btn btn-dark btn-block mt-2 mb-3",attrs:{href:"https://github.com/new",target:"_blank"}},[n("font-awesome-icon",{attrs:{icon:["fab","github"]}}),t._v(" "),n("span",[n("font-awesome-icon",{staticClass:"text-success",attrs:{icon:["fas","check"]}}),t._v("\n          Repository found\n        ")],1),t._v(" "),n("i")],1):n("a",{staticClass:"d-flex justify-content-between align-items-center btn btn-dark btn-block mt-2 mb-3",attrs:{href:"https://github.com/new",target:"_blank"}},[n("font-awesome-icon",{attrs:{icon:["fab","github"]}}),t._v("\n        Create Repository\n        "),n("i")],1),t._v(" "),n("ConnectActionButton",{staticClass:"mt-2",attrs:{action:t.register,disabled:t.waitingForOracleRequest||t.waitingForOracleFulfillment||t.checkingRepo,required:["wallet","github"],size:"lg"}},[t.waitingForOracleRequest||t.waitingForOracleFulfillment||t.checkingRepo?n("font-awesome-icon",{attrs:{icon:["fas","circle-notch"],spin:""}}):t._e(),t._v("\n        "+t._s(t.waitingForOracleRequest?"Waiting for confirmation...":t.waitingForOracleFulfillment?"Waiting for oracle":t.checkingRepo?"Waiting for repository":"Verify Address")+"\n      ")],1)],1):t._e()])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{GithubAvatar:n(383).default,AddressShort:n(382).default,ConnectActionButton:n(384).default})}}]);